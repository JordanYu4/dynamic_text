<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
  </head>

  <body>
    <div id="text-container">
      <!-- <span>You can use</span> -->
      <span>So Christ himself gave the</span>
      <section id="dynamic-word">
        <div id="word" class="animated fadeInDown">
          apostles
        </div>
      </section>
    </div>

  </body>

  <footer>
    <script>
      let words = ['apostles', 'prophets', 'evangelists', 'pastors', 'teachers'];
      // let words = ['postgres', 'mongoDB', 'mySQL'];
      const target = document.getElementById("dynamic-word");

      // add entry animation 

      // on animation end: remove entry animation 

      // add exit animation 

      // on animation end: remove exit animation, switch text 

      function wordFactory(arr) {
        let idx = 1;
        const arrLength = arr.length;

        return () => {
          const word = arr[idx % arrLength];
          idx++;
          return word; 
        }
      }

      const wordGenerator = wordFactory(words);

      function cycleWord(node, entryAnimation, exitAnimation) {
        console.log('cycling word');
        node.classList.add('animated', entryAnimation);

        function handleEntryEnd() {
          node.classList.remove('animated', entryAnimation);
          node.removeEventListener('animationend', handleEntryEnd);

          node.classList.add('animated', exitAnimation);

          function handleTextChange() {
            node.classList.remove('animated', exitAnimation);
            node.removeEventListener('animationend', handleTextChange);

            node.innerHTML = wordGenerator();
          }
          
          node.addEventListener('animationend', handleTextChange);
        }
        
        node.addEventListener('animationend', handleEntryEnd); 
      }

      setInterval(() => { cycleWord(target, 'fadeInDown', 'fadeOutDown') }, 1000);
    </script>
  </footer>
</html>